// -----------------------------
// ë¬¸ì œ ë°°ì—´ (ë¬¸ì œ ë°ì´í„° í¬í•¨)
export const industry020401 = [
    {
        question: "ëƒ‰ë§¤ ìˆœí™˜ ì‹œìŠ¤í…œì—ì„œ ì•¡ì²´ ëƒ‰ë§¤ ë‚´ì— í¬í•¨ëœ ìˆ˜ë¶„ì„ í¡ìˆ˜í•˜ì—¬ ì‹œìŠ¤í…œì˜ ë¶€ì‹ì„ ë°©ì§€í•˜ê³ , ì´ë¬¼ì§ˆì„ ê±¸ëŸ¬ì£¼ëŠ” ì—­í• ì„ í•˜ëŠ” ë¶€í’ˆì€ ë¬´ì—‡ì…ë‹ˆê¹Œ?",
        options: ["íŒ½ì°½ ë°¸ë¸Œ(Expansion Valve)", "ì‘ì¶•ê¸°(Condenser)", "ìˆ˜ì•¡ê¸°(Receiver Drier)", "ì••ì¶•ê¸°(Compressor)"],
        answer: 2,
        explain: "ìˆ˜ì•¡ê¸°(ë¦¬ì‹œë²„ ë“œë¼ì´ì–´)ëŠ” ëƒ‰ë§¤ ì† ìˆ˜ë¶„ì„ í¡ìˆ˜í•˜ëŠ” ê±´ì¡°ì œì™€ ì´ë¬¼ì§ˆì„ ê±°ë¥´ëŠ” í•„í„°ë¥¼ í¬í•¨í•˜ì—¬ ì‹œìŠ¤í…œì„ ê±´ì¡°í•˜ê³  ì²­ì •í•˜ê²Œ ìœ ì§€í•©ë‹ˆë‹¤."
    },
    {
        question: "A/C ì‹œìŠ¤í…œ ì •ë¹„ ì¤‘ ëƒ‰ë§¤ ì¶©ì „ ì „ì— ë°˜ë“œì‹œ ì§„ê³µ ì‘ì—…ì„ ì‹¤ì‹œí•´ì•¼ í•˜ëŠ” ê°€ì¥ ì¤‘ìš”í•œ ëª©ì ì€ ë¬´ì—‡ì…ë‹ˆê¹Œ?",
        options: ["ì‹œìŠ¤í…œ ë‚´ë¶€ ëƒ‰ë§¤ì˜ ëˆ„ì„¤ ë¶€ìœ„ë¥¼ ì •í™•í•˜ê²Œ ì°¾ê¸° ìœ„í•¨", "ì‹œìŠ¤í…œ ë‚´ë¶€ì˜ ì••ë ¥ì„ ë†’ì—¬ ì‘ì¶• íš¨ìœ¨ì„ ì¦ëŒ€ì‹œí‚¤ê¸° ìœ„í•¨", "ì‹œìŠ¤í…œ ë‚´ë¶€ì˜ ëƒ‰ë™ ì˜¤ì¼ì„ ê·œì •ëŸ‰ë§Œí¼ ë³´ì¶©í•˜ê¸° ìœ„í•¨", "ì‹œìŠ¤í…œ ë‚´ë¶€ì˜ ìˆ˜ë¶„ ë° ë¹„ì‘ì¶•ì„± ê°€ìŠ¤(ê³µê¸°)ë¥¼ ì œê±°í•˜ê¸° ìœ„í•¨"],
        answer: 3,
        explain: "ì§„ê³µ ì‘ì—…ì€ ì‹œìŠ¤í…œ ë‚´ë¶€ì˜ ê³µê¸°ì™€ ìˆ˜ë¶„ì„ ì œê±°í•˜ì—¬ ëƒ‰ë§¤ ìˆœí™˜ ë°©í•´ì™€ ë¶€ì‹ ë°©ì§€, ëƒ‰ë§¤ ì‹œìŠ¤í…œì˜ ì„±ëŠ¥ ì €í•˜ë¥¼ ë§‰ê¸° ìœ„í•œ í•„ìˆ˜ ì ˆì°¨ì…ë‹ˆë‹¤."
    },
    {
        question: "ì‹ ëƒ‰ë§¤ì¸ R-1234yfë¥¼ ì‚¬ìš©í•˜ëŠ” ì°¨ëŸ‰ì„ ì •ë¹„í•  ë•Œ R-134a ì‹œìŠ¤í…œë³´ë‹¤ ë”ìš± ì—„ê²©í•˜ê²Œ ì£¼ì˜í•´ì•¼ í•  ì•ˆì „ ì‚¬í•­ì€ ë¬´ì—‡ì…ë‹ˆê¹Œ?",
        options: ["ëƒ‰ë§¤ì˜ ë…ì„± ë•Œë¬¸ì— í•­ìƒ ë°©ë… ë§ˆìŠ¤í¬ë¥¼ ì°©ìš©í•´ì•¼ í•œë‹¤.", "ëƒ‰ë§¤ì˜ ì˜¨ë„ê°€ ë§¤ìš° ë‚®ìœ¼ë¯€ë¡œ ë™ìƒì— íŠ¹íˆ ì£¼ì˜í•´ì•¼ í•œë‹¤.", "ëƒ‰ë§¤ê°€ ì¸í™”ì„±(ì•½í•œ ê°€ì—°ì„±)ì´ ìˆì–´ í™”ê¸° ë° ìŠ¤íŒŒí¬ë¥¼ í”¼í•´ì•¼ í•œë‹¤.", "ëƒ‰ë§¤ê°€ ê³ ì••ì´ë¯€ë¡œ ì§„ê³µ ì‘ì—…ì„ í‰ì†Œë³´ë‹¤ ë” ì˜¤ë˜ í•´ì•¼ í•œë‹¤."],
        answer: 2,
        explain: "R-1234yfëŠ” ì•½í•œ ê°€ì—°ì„±ì„ ê°€ì§€ê³  ìˆì–´, ì •ë¹„ ì‹œ ìŠ¤íŒŒí¬ë‚˜ ê³ ì—´ì´ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì¥ì†Œì—ì„œì˜ ì‘ì—…ì€ ì—„ê²©í•˜ê²Œ ê¸ˆì§€ë©ë‹ˆë‹¤."
    },
    {
        question: "A/C ì‹œìŠ¤í…œì˜ ì••ì¶•ê¸° ì‘ë™ì„ ì œì–´í•˜ëŠ” ì••ë ¥ ìŠ¤ìœ„ì¹˜ ì¤‘, ëƒ‰ë§¤ ëˆ„ì„¤ ë“±ìœ¼ë¡œ ì¸í•´ ì €ì••ì´ ì§€ë‚˜ì¹˜ê²Œ ë‚®ì•„ì¡Œì„ ë•Œ ì••ì¶•ê¸° ì‘ë™ì„ ì •ì§€ì‹œì¼œ ì••ì¶•ê¸°ë¥¼ ë³´í˜¸í•˜ëŠ” ìŠ¤ìœ„ì¹˜ëŠ” ë¬´ì—‡ì…ë‹ˆê¹Œ?",
        options: ["ê³ ì•• ì••ë ¥ ìŠ¤ìœ„ì¹˜(High Pressure Switch)", "ì €ì•• ì••ë ¥ ìŠ¤ìœ„ì¹˜(Low Pressure Switch)", "ì—ì–´ ë¯¹ìŠ¤ ìŠ¤ìœ„ì¹˜(Air Mix Switch)", "ì•ˆì „ ì»· ìŠ¤ìœ„ì¹˜(Safety Cut Switch)"],
        answer: 1,
        explain: "ì €ì•• ì••ë ¥ ìŠ¤ìœ„ì¹˜ëŠ” ëƒ‰ë§¤ ë¶€ì¡± ë“±ìœ¼ë¡œ í¡ì… ì••ë ¥ì´ ê·œì •ê°’ ì´í•˜ë¡œ ë‚´ë ¤ê°€ë©´ ì••ì¶•ê¸° ì†ìƒ ë°©ì§€ë¥¼ ìœ„í•´ ì‘ë™ì„ ì¤‘ë‹¨ì‹œí‚µë‹ˆë‹¤."
    },
    {
        question: "ì—ì–´ì»¨ ì‘ë™ ì‹œ ì €ì•• ì¸¡ ì••ë ¥ì´ ê·œì • ì••ë ¥ë³´ë‹¤ ë§¤ìš° ë‚®ê³ (ê±°ì˜ ì§„ê³µ ìƒíƒœ), ê³ ì•• ì¸¡ ì••ë ¥ë„ ê·œì • ì••ë ¥ë³´ë‹¤ ë‚®ì€ ê²½ìš°ì— ì˜ì‹¬í•  ìˆ˜ ìˆëŠ” ê°€ì¥ ì ì ˆí•œ ê³ ì¥ ì›ì¸ì€ ë¬´ì—‡ì…ë‹ˆê¹Œ?",
        options: ["ëƒ‰ë§¤ëŸ‰ì´ ê³¼ë„í•˜ê²Œ ë§ì€ ê²½ìš°", "íŒ½ì°½ ë°¸ë¸Œ(TXV)ê°€ ì™„ì „íˆ ë§‰íŒ ê²½ìš°", "ì••ì¶•ê¸° í† ì¶œ ë°¸ë¸Œê°€ íŒŒì†ëœ ê²½ìš°", "ì‘ì¶•ê¸° ëƒ‰ê° íŒ¬ì´ ê³ ì¥ ë‚œ ê²½ìš°"],
        answer: 1,
        explain: "íŒ½ì°½ ë°¸ë¸Œê°€ ë§‰íˆë©´ ëƒ‰ë§¤ ìˆœí™˜ì´ ê±°ì˜ ì¼ì–´ë‚˜ì§€ ì•Šì•„ ì••ì¶•ê¸° í¡ì… ì¸¡(ì €ì••)ì´ ì§„ê³µì— ê°€ê¹ê²Œ ë˜ë©°, ê³ ì•• ì¸¡ë„ ë‚®ê²Œ ì¸¡ì •ë©ë‹ˆë‹¤."
    },
    {
        question: "íŒ½ì°½ ë°¸ë¸Œ(TXV, Thermal Expansion Valve) ëŒ€ì‹  ì˜¤ë¦¬í”¼ìŠ¤ íŠœë¸Œ(Orifice Tube)ë¥¼ ì‚¬ìš©í•˜ëŠ” ì‹œìŠ¤í…œì—ì„œ ì•¡ì²´ ëƒ‰ë§¤ë¥¼ ê¸°í™”ì‹œí‚¤ëŠ” ì¥ì†Œì™€ ê·¸ ì—­í• ì„ ê°€ì¥ ë°”ë¥´ê²Œ ì„¤ëª…í•œ ê²ƒì€ ë¬´ì—‡ì…ë‹ˆê¹Œ?",
        options: ["ì‘ì¶•ê¸° ë‚´ë¶€ì—ì„œ ëƒ‰ë§¤ì˜ ì••ë ¥ì„ ë‚®ì¶° ê¸°í™”ì‹œí‚¨ë‹¤.", "ìˆ˜ì•¡ê¸° ë‚´ë¶€ì—ì„œ ëƒ‰ë§¤ì˜ ì••ë ¥ì„ ë‚®ì¶° ê¸°í™”ì‹œí‚¨ë‹¤.", "ì¦ë°œê¸° ì…êµ¬ì—ì„œ ëƒ‰ë§¤ì˜ ì••ë ¥ì„ ë‚®ì¶° ì¦ë°œê¸° ë‚´ë¶€ì—ì„œ ê¸°í™”ì‹œí‚¨ë‹¤.", "ì••ì¶•ê¸° ë‚´ë¶€ì—ì„œ ëƒ‰ë§¤ì˜ ì••ë ¥ì„ ë†’ì—¬ ê¸°í™”ì‹œí‚¨ë‹¤."],
        answer: 2,
        explain: "ì˜¤ë¦¬í”¼ìŠ¤ íŠœë¸ŒëŠ” ëƒ‰ë§¤ì˜ ì••ë ¥ì„ ê¸‰ê²©íˆ ë‚®ì¶”ëŠ” ì—­í• ì„ í•˜ë©°, ì´ë¡œ ì¸í•´ ì¦ë°œê¸° ë‚´ë¶€ë¡œ ë“¤ì–´ê°„ ì €ì•• ëƒ‰ë§¤ê°€ í¡ì—´ ì‘ìš©(ê¸°í™”)ì„ í•©ë‹ˆë‹¤."
    },
    {
        question: "ë‚œë°© ì¥ì¹˜ ì‘ë™ ì‹œ ì‹¤ë‚´ì— ë‹¬ì½¤í•œ ëƒ„ìƒˆê°€ ë‚˜ê±°ë‚˜, ì• ìœ ë¦¬ì°½ì— ê¸°ë¦„ë•Œê°€ ë¼ê³ , ëƒ‰ê°ìˆ˜ ë ˆë²¨ì´ ì§€ì†ì ìœ¼ë¡œ ê°ì†Œí•˜ëŠ” ê²½ìš°, ê°€ì¥ ë¨¼ì € ì˜ì‹¬í•´ì•¼ í•  ë¶€í’ˆì˜ ê³ ì¥ì€ ë¬´ì—‡ì…ë‹ˆê¹Œ?",
        options: ["ë¸”ë¡œì›Œ ëª¨í„°ì˜ ê³ ì¥", "ì—ì–´ ë¯¹ìŠ¤ ëŒí¼ì˜ ì‘ë™ ë¶ˆëŸ‰", "íˆí„° ì½”ì–´(Heater Core)ì˜ ëˆ„ì„¤", "ì—”ì§„ ëƒ‰ê°ìˆ˜ ì˜¨ë„ ì„¼ì„œì˜ ë¶ˆëŸ‰"],
        answer: 2,
        explain: "íˆí„° ì½”ì–´ ëˆ„ì„¤ ì‹œ ëƒ‰ê°ìˆ˜ê°€ ì¦ë°œí•˜ì—¬ ì‹¤ë‚´ë¡œ ìœ ì…ë˜ë©°, ë¶€ë™ì•¡ ë•Œë¬¸ì— ë‹¬ì½¤í•œ ëƒ„ìƒˆê°€ ë‚˜ê±°ë‚˜ ìœ ë¦¬ì°½ì— ìœ ë§‰ì´ í˜•ì„±ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
    }
];

// ë¬¸ì œ/ë³´ê¸° ëœë¤ ì„ê¸°
function shuffleArray(array) {
    return array.sort(() => Math.random() - 0.5);
}
 
// âœ… ë¬¸ì œ ìˆœì„œ ëœë¤ + 60ë¬¸ì œ ì œí•œ
let questions = shuffleArray([...industry020401]).slice(0, 60);
 
// âœ… ë³´ê¸° ìˆœì„œë„ ëœë¤í™”
questions.forEach((q) => {
    let combined = q.options.map((opt, idx) => ({ opt, idx }));
    combined = shuffleArray(combined);
    q.answer = combined.findIndex((c) => c.idx === q.answer);
    q.options = combined.map((c) => c.opt);
});
 
// -----------------------------
// ë‹µì•ˆ ì €ì¥
let answers = Array(questions.length).fill(-1);
 
// -----------------------------
// ë‚¨ì€ ë¬¸ì œ í‘œì‹œ
function updateRemaining() {
    const remainingDiv = document.getElementById("remaining");
    let answered = answers.filter((a) => a >= 0).length;
    remainingDiv.textContent = `ë‚¨ì€ ë¬¸ì œ: ${questions.length - answered}/${questions.length}`;
}
 
// -----------------------------
// ë¬¸ì œ ë Œë”ë§
function renderQuiz() {
    const quizDiv = document.getElementById("quiz");
    quizDiv.innerHTML = "";
 
    questions.forEach((q, i) => {
      const div = document.createElement("div");
      div.className = "question";
      
      // ìƒíƒœ í‘œì‹œ spanê³¼ ì œëª© ë¶„ë¦¬
      div.innerHTML = `
          <span id="q-status-${i}" class="q-status"></span>
          <strong class="q-title">${i + 1}. ${q.question}</strong>
      `;

      // 1. imagePath ì†ì„±ì´ ìˆëŠ”ì§€ í™•ì¸
        if (q.imagePath) {
            div.innerHTML += `<img 
                src="${q.imagePath}" 
                alt="ë¬¸ì œ ê·¸ë¦¼" 
                style="width: 500px; height: auto; margin: 15px 0;"
            >`;
        }
 
      const optsDiv = document.createElement("div");
      optsDiv.className = "options";
      q.options.forEach((opt, j) => {
        const label = document.createElement("label");
        label.innerHTML = `<input type="radio" name="q${i}" value="${j}"> ${opt}`;
        
        const radioInput = label.querySelector("input");
        
        radioInput.addEventListener("change", () => {
          answers[i] = j;
          updateRemaining();

          const allLabels = optsDiv.querySelectorAll('label');
          allLabels.forEach(l => l.classList.remove('selected'));

          label.classList.add('selected');

        });
        
        optsDiv.appendChild(label);
      });
      div.appendChild(optsDiv);
 
      const explainDiv = document.createElement("div");
      explainDiv.className = "explain";
      div.appendChild(explainDiv);
 
      quizDiv.appendChild(div);
    });
 
    updateRemaining();
}
 
// -----------------------------
// ì œì¶œ ë° ì±„ì  (ì•„ì´ì½˜/ìƒ‰ìƒ ì„¤ì •)
function submitQuiz() {
    // 1. ì•ˆ í‘¼ ë¬¸ì œ ì¸ë±ìŠ¤ í™•ì¸
    const firstUnansweredIndex = answers.findIndex((a) => a < 0);
    const unansweredCount = answers.filter((a) => a < 0).length;

    // 2. ì•ˆ í‘¼ ë¬¸ì œê°€ ìˆì„ ê²½ìš° í™•ì¸
    if (unansweredCount > 0) {
        const confirmSubmit = confirm(
            `ì•„ì§ ${unansweredCount}ê°œì˜ ë¬¸ì œë¥¼ í’€ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\nê³„ì† ì œì¶œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (ì·¨ì†Œ ì‹œ ë¬¸ì œí’€ì´ ê³„ì† ë° ì²« ì•ˆ í‘¼ ë¬¸ì œë¡œ ì´ë™)`
        );
        
        if (!confirmSubmit) {
            if (firstUnansweredIndex !== -1) {
                const questionDiv = document.getElementsByClassName("question")[firstUnansweredIndex];
                questionDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
            return;
        }
    }
    
    clearInterval(timerInterval);
    document.getElementById("timer").textContent = "";
 
    let score = 0;
    questions.forEach((q, i) => {
      const questionDiv = document.getElementsByClassName("question")[i];
      const explainDiv = questionDiv.querySelector(".explain");
      const labels = questionDiv.querySelectorAll('label'); 
      const statusSpan = document.getElementById(`q-status-${i}`); 

      // ì´ì „ ìƒíƒœ í´ë˜ìŠ¤ ì´ˆê¸°í™”
      // ì´ì œ status-correct í´ë˜ìŠ¤ëŠ” ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ status-wrongë§Œ ë‚¨ê¹€
      statusSpan.classList.remove('status-correct', 'status-wrong', 'status-unanswered');

      // ğŸ’¡ ë¬¸ì œ ìƒíƒœì— ë”°ë¼ ì•„ì´ì½˜/ìƒ‰ìƒ/í´ë˜ìŠ¤ ê²°ì •
      if (answers[i] == q.answer) {
          // ì •ë‹µ: â­• 
          score++;
          labels[q.answer].style.backgroundColor = "#b6fcb6";
          statusSpan.innerHTML = 'â­•';
      } else if (answers[i] >= 0) {
          // ì˜¤ë‹µ: âŒ 
          labels[q.answer].style.backgroundColor = "#b6fcb6"; // ì •ë‹µì€ ì´ˆë¡ìƒ‰
          labels[answers[i]].style.backgroundColor = "#fcb6b6"; // ë‚´ê°€ ê³ ë¥¸ ì˜¤ë‹µì€ ë¹¨ê°„ìƒ‰
          statusSpan.innerHTML = 'âŒ';
          statusSpan.style.color = '#dc3545'; 
          statusSpan.classList.add('status-wrong'); // í´ë˜ìŠ¤ ì¶”ê°€ (CSSì—ì„œ ë¹¨ê°„ìƒ‰ ê°•ì œ ì ìš©)
      } else {
          // ë¯¸ì‘ë‹µ: ì•„ë¬´ í‘œì‹œë„ í•˜ì§€ ì•ŠìŒ (ì •ë‹µ ì˜µì…˜ í•˜ì´ë¼ì´íŠ¸ë§Œ ìœ ì§€)
          labels[q.answer].style.backgroundColor = "#b6fcb6"; // ì •ë‹µì€ ì´ˆë¡ìƒ‰
          statusSpan.innerHTML = ''; // ì•„ì´ì½˜ ë‚´ìš© ë¹„ìš°ê¸°
          statusSpan.style.color = ''; // ìŠ¤íƒ€ì¼ ì œê±°
      }

      // ì±„ì  ì™„ë£Œ í›„ ê¸°íƒ€ ìŠ¤íƒ€ì¼ ì œê±° ë° í•´ì„¤ í‘œì‹œ
      labels.forEach(l => l.classList.remove('selected'));

      explainDiv.innerHTML = `
          <p style="color: #1f3b73; font-weight: 700;">ì •ë‹µ: ${q.options[q.answer]}</p>
          <p>${q.explain}</p>
      `;

      questionDiv.querySelectorAll('input[type="radio"]').forEach((r) => (r.disabled = true));
    });
 
    // ìƒë‹¨ ë°°ë„ˆì— ì ìˆ˜ í‘œì‹œ
    const status = document.getElementById("status");
    status.classList.add("center");
    status.innerHTML = `<span id="scoreDisplay">ìë™ë³€ì†ê¸° ì •ë¹„ 1íšŒì°¨ ì´ì : ${score}/${questions.length}</span>`;
 
    // ì œì¶œ ë²„íŠ¼ ì œê±°
    document.getElementById("submitBtn").style.display = "none";
 
    // ê²°ê³¼ì°½ í‘œì‹œ
    const resultDiv = document.getElementById("result");
    resultDiv.innerHTML = `<h2>ìë™ë³€ì†ê¸° ì •ë¹„ 1íšŒì°¨ ì´ì : ${score}/${questions.length}</h2>`;
}
 
// -----------------------------
// íƒ€ì´ë¨¸
let totalSeconds = 60 * 60;
function updateTimer() {
    let h = Math.floor(totalSeconds / 3600);
    let m = Math.floor((totalSeconds % 3600) / 60);
    let s = totalSeconds % 60;
    document.getElementById(
      "timer"
    ).textContent = `ë‚¨ì€ ì‹œê°„: ${h.toString().padStart(2, "0")}:${m
      .toString()
      .padStart(2, "0")}:${s.toString().padStart(2, "0")}`;
    if (totalSeconds <= 0) {
      submitQuiz();
    } else {
      totalSeconds--;
    }
}
let timerInterval = setInterval(updateTimer, 1000);
 
// -----------------------------
// ì´ˆê¸°í™”
document.getElementById("submitBtn").addEventListener("click", submitQuiz);
renderQuiz();