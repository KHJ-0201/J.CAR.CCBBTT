<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë²„ì „ ì„ íƒ</title>
    <link rel="stylesheet" href="index.css"> 
    <style>
        /* [ì¶”ê°€] ì¹´í†¡ ì „ìš© íƒˆì¶œ í™”ë©´ ë””ìì¸ */
        #kakao-exit-screen {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #ffffff; z-index: 99999; flex-direction: column;
            align-items: center; justify-content: center; text-align: center;
        }
        .exit-btn {
            width: 80%; max-width: 320px; padding: 20px; margin: 10px;
            border: none; border-radius: 15px; color: white;
            font-size: 1.2rem; font-weight: bold; cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .android-btn { background: #34a853; }
        .ios-btn { background: #000000; }
    </style>
</head>
<body>
    <div id="kakao-exit-screen">
        <h2 style="margin-bottom: 10px; color: #1e293b;">ì™¸ë¶€ ë¸Œë¼ìš°ì € ì‹¤í–‰</h2>
        <p style="margin-bottom: 30px; color: #64748b; line-height: 1.5;">
            ì¹´ì¹´ì˜¤í†¡ ë‚´ë¶€ì—ì„œëŠ” ë³´ì•ˆìƒ ì´ìš©ì´ ì œí•œë©ë‹ˆë‹¤.<br>ì•„ë˜ ë³¸ì¸ì˜ ê¸°ê¸°ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.
        </p>
        <button class="exit-btn android-btn" onclick="exitToExternal('android')">ì‚¼ì„±/ì•ˆë“œë¡œì´ë“œ í´ë¦­</button>
        <button class="exit-btn ios-btn" onclick="exitToExternal('ios')">ì•„ì´í°/Safari í´ë¦­</button>
    </div>

    <div id="pageContent">
        <div class="container">
            <h1>ì›í•˜ëŠ” ë²„ì „ì„ ì„ íƒí•˜ì„¸ìš”</h1>
            <div class="banner-wrapper">
                <div id="pcBanner" class="banner pc-color">
                    <h2>ğŸ–¥ï¸ PC ë²„ì „</h2>
                    <p>ë„“ì€ í™”ë©´ì— ìµœì í™”</p>
                </div>
                <div id="mobileBanner" class="banner mobile-color">
                    <h2>ğŸ“± ëª¨ë°”ì¼ ë²„ì „</h2>
                    <p>ìŠ¤ë§ˆíŠ¸í° í™”ë©´ì— ìµœì í™”</p>
                </div>
            </div>
            <footer class="bottom-memo" onclick="handleAdminClick()" style="cursor: default; user-select: none;">
                <p>ì¸í„°ë„· ì„¤ì • >> í™ˆí™”ë©´ì— í˜„ì¬ ì›¹í˜ì´ì§€ ì¶”ê°€ ì‹œ<br>ë”ìš± ìµœì ì˜ í™˜ê²½ì—ì„œ ë¬¸ì œ í’€ì´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>
            </footer>
        </div>
    </div>

    <div id="admin-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:9999; align-items:center; justify-content:center;">
        <div style="background:white; padding:30px; border-radius:15px; text-align:center; box-shadow:0 0 20px rgba(0,0,0,0.5); width:300px;">
            <h3 style="margin-bottom:20px; color:#2563eb;">ê´€ë¦¬ì ì¸ì¦</h3>
            <input type="password" id="admin-pw-input" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥" style="width:90%; padding:10px; font-size:1.2rem; border:2px solid #ddd; border-radius:8px; margin-bottom:20px; text-align:center;">
            <div style="display:flex; gap:10px; justify-content:center;">
                <button onclick="checkAdminPassword()" style="padding:10px 20px; background:#2563eb; color:white; border:none; border-radius:8px; cursor:pointer; font-weight:bold;">í™•ì¸</button>
                <button onclick="closeAdminModal()" style="padding:10px 20px; background:#eee; color:#666; border:none; border-radius:8px; cursor:pointer;">ì·¨ì†Œ</button>
            </div>
        </div>
    </div>

    <script>
        // [ìˆ˜ì •] ì¹´í†¡ ê°ì§€ ë° ìˆ˜ë™ íƒˆì¶œ ë¡œì§
        (function() {
            const ua = navigator.userAgent.toLowerCase();
            const isKakao = ua.indexOf('kakaotalk') > -1;
            const targetUrl = window.location.href;

            if (isKakao) {
                document.addEventListener('DOMContentLoaded', () => {
                    document.getElementById('kakao-exit-screen').style.display = 'flex';
                    document.getElementById('pageContent').style.display = 'none';
                });
            }

            window.exitToExternal = function(os) {
                if (os === 'android') {
                    location.href = 'intent://' + targetUrl.replace(/https?:\/\//i, '') + '#Intent;scheme=http;package=com.android.chrome;end';
                } else {
                    location.href = targetUrl + (targetUrl.includes('?') ? '&' : '?') + 'open_external_browser=1';
                }
            };
        })();

        // ê´€ë¦¬ì í´ë¦­ ë“± ê¸°ì¡´ ìŠ¤í¬ë¦½íŠ¸ ê·¸ëŒ€ë¡œ ìœ ì§€
        let adminClickCount = 0;
        let adminClickTimer = null;
        function handleAdminClick() {
            adminClickCount++;
            clearTimeout(adminClickTimer);
            adminClickTimer = setTimeout(() => { adminClickCount = 0; }, 2000);
            if (adminClickCount >= 5) {
                document.getElementById('admin-modal').style.display = 'flex';
                document.getElementById('admin-pw-input').focus();
                adminClickCount = 0;
            }
        }
        function closeAdminModal() {
            document.getElementById('admin-modal').style.display = 'none';
            document.getElementById('admin-pw-input').value = '';
        }
        function checkAdminPassword() {
            const pw = document.getElementById('admin-pw-input').value;
            const _0x4f2 = (s) => s.split('').reverse().join('');
            const _0x91a = parseInt(_0x4f2("8712351"));
            const _0x22b = (Math.pow(10, 6) * 1.5) + 32178;
            if (pw && Number(pw) === _0x91a && (Number(pw) ^ 0) === _0x22b) {
                sessionStorage.setItem('admin_auth', 'granted');
                location.href = "admin.html";
            } else {
                alert("ì¸ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                closeAdminModal();
            }
        }
        document.getElementById('admin-pw-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') checkAdminPassword();
        });
    </script>
    <script src="index.js"></script> 
</body>
</html>